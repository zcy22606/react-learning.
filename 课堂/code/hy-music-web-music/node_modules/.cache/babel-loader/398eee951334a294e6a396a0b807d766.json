{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\\\u51B7\\u9E1F\\u4E00\\u7C73\\u4E94\\\\Desktop\\\\my-learn\\\\React\\u5B66\\u4E60\\\\\\u8BFE\\u5802\\\\code\\\\hy-music-web-music\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{memo,useEffect,useRef,useCallback,useState}from'react';import{useSelector,useDispatch,shallowEqual}from'react-redux';import{getTopBannerAction}from'../../store/actionCreators';import{Carousel}from'antd';import{BannerWrapper,BannerLeft,BannerRight,BannerControl}from'./style';export default memo(function HYTopBanner(){// state\nvar _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentIndex=_useState2[0],setCurrentIndex=_useState2[1];// 组件和redux关联: 获取数据和进行操作\nvar _useSelector=useSelector(function(state){return{// topBanners: state.get(\"recommend\").get(\"topBanners\")\ntopBanners:state.getIn([\"recommend\",\"topBanners\"])};},shallowEqual),topBanners=_useSelector.topBanners;var dispatch=useDispatch();// 其他hooks\nvar bannerRef=useRef();useEffect(function(){dispatch(getTopBannerAction());},[dispatch]);var bannerChange=useCallback(function(from,to){setTimeout(function(){setCurrentIndex(to);},0);},[]);// 其他业务逻辑\nvar bgImage=topBanners[currentIndex]&&topBanners[currentIndex].imageUrl+\"?imageView&blur=40x20\";return/*#__PURE__*/React.createElement(BannerWrapper,{bgImage:bgImage},/*#__PURE__*/React.createElement(\"div\",{className:\"banner wrap-v2\"},/*#__PURE__*/React.createElement(BannerLeft,null,/*#__PURE__*/React.createElement(Carousel,{effect:\"fade\",autoplay:true,ref:bannerRef,beforeChange:bannerChange},topBanners.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"banner-item\",key:item.imageUrl},/*#__PURE__*/React.createElement(\"img\",{className:\"image\",src:item.imageUrl,alt:item.typeTitle}));}))),/*#__PURE__*/React.createElement(BannerRight,null),/*#__PURE__*/React.createElement(BannerControl,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn left\",onClick:function onClick(e){return bannerRef.current.prev();}}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn right\",onClick:function onClick(e){return bannerRef.current.next();}}))));});","map":{"version":3,"sources":["C:/Users/冷鸟一米五/Desktop/my-learn/React学习/课堂/code/hy-music-web-music/src/pages/discover/c-pages/recommend/c-cpns/top-banner/index.js"],"names":["React","memo","useEffect","useRef","useCallback","useState","useSelector","useDispatch","shallowEqual","getTopBannerAction","Carousel","BannerWrapper","BannerLeft","BannerRight","BannerControl","HYTopBanner","currentIndex","setCurrentIndex","state","topBanners","getIn","dispatch","bannerRef","bannerChange","from","to","setTimeout","bgImage","imageUrl","map","item","index","typeTitle","e","current","prev","next"],"mappings":"mPAAA,MAAOA,CAAAA,KAAP,EAAgBC,IAAhB,CAAsBC,SAAtB,CAAiCC,MAAjC,CAAyCC,WAAzC,CAAsDC,QAAtD,KAAsE,OAAtE,CACA,OAASC,WAAT,CAAsBC,WAAtB,CAAmCC,YAAnC,KAAuD,aAAvD,CAEA,OAASC,kBAAT,KAAmC,4BAAnC,CAEA,OAASC,QAAT,KAAyB,MAAzB,CACA,OACEC,aADF,CAEEC,UAFF,CAGEC,WAHF,CAIEC,aAJF,KAKO,SALP,CAOA,cAAeb,CAAAA,IAAI,CAAC,QAASc,CAAAA,WAAT,EAAuB,CACzC;AADyC,cAEDV,QAAQ,CAAC,CAAD,CAFP,wCAElCW,YAFkC,eAEpBC,eAFoB,eAIzC;AAJyC,iBAKlBX,WAAW,CAAC,SAAAY,KAAK,QAAK,CAC3C;AACAC,UAAU,CAAED,KAAK,CAACE,KAAN,CAAY,CAAC,WAAD,CAAc,YAAd,CAAZ,CAF+B,CAAL,EAAN,CAG9BZ,YAH8B,CALO,CAKjCW,UALiC,cAKjCA,UALiC,CASzC,GAAME,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CAEA;AACA,GAAMe,CAAAA,SAAS,CAAGnB,MAAM,EAAxB,CACAD,SAAS,CAAC,UAAM,CACdmB,QAAQ,CAACZ,kBAAkB,EAAnB,CAAR,CACD,CAFQ,CAEN,CAACY,QAAD,CAFM,CAAT,CAIA,GAAME,CAAAA,YAAY,CAAGnB,WAAW,CAAC,SAACoB,IAAD,CAAOC,EAAP,CAAc,CAC7CC,UAAU,CAAC,UAAM,CACfT,eAAe,CAACQ,EAAD,CAAf,CACD,CAFS,CAEP,CAFO,CAAV,CAGD,CAJ+B,CAI7B,EAJ6B,CAAhC,CAMA;AACA,GAAME,CAAAA,OAAO,CAAGR,UAAU,CAACH,YAAD,CAAV,EAA6BG,UAAU,CAACH,YAAD,CAAV,CAAyBY,QAAzB,CAAoC,uBAAjF,CAEA,mBACE,oBAAC,aAAD,EAAe,OAAO,CAAED,OAAxB,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,oBAAC,UAAD,mBACE,oBAAC,QAAD,EAAU,MAAM,CAAC,MAAjB,CAAwB,QAAQ,KAAhC,CAAiC,GAAG,CAAEL,SAAtC,CAAiD,YAAY,CAAEC,YAA/D,EAEIJ,UAAU,CAACU,GAAX,CAAe,SAACC,IAAD,CAAOC,KAAP,CAAiB,CAC9B,mBACE,2BAAK,SAAS,CAAC,aAAf,CAA6B,GAAG,CAAED,IAAI,CAACF,QAAvC,eACE,2BAAK,SAAS,CAAC,OAAf,CAAuB,GAAG,CAAEE,IAAI,CAACF,QAAjC,CAA2C,GAAG,CAAEE,IAAI,CAACE,SAArD,EADF,CADF,CAKD,CAND,CAFJ,CADF,CADF,cAcE,oBAAC,WAAD,MAdF,cAeE,oBAAC,aAAD,mBACE,8BAAQ,SAAS,CAAC,UAAlB,CAA6B,OAAO,CAAE,iBAAAC,CAAC,QAAIX,CAAAA,SAAS,CAACY,OAAV,CAAkBC,IAAlB,EAAJ,EAAvC,EADF,cAEE,8BAAQ,SAAS,CAAC,WAAlB,CAA8B,OAAO,CAAE,iBAAAF,CAAC,QAAIX,CAAAA,SAAS,CAACY,OAAV,CAAkBE,IAAlB,EAAJ,EAAxC,EAFF,CAfF,CADF,CADF,CAwBD,CAlDkB,CAAnB","sourcesContent":["import React, { memo, useEffect, useRef, useCallback, useState } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\n\nimport { getTopBannerAction } from '../../store/actionCreators';\n\nimport { Carousel } from 'antd';\nimport {\n  BannerWrapper,\n  BannerLeft,\n  BannerRight,\n  BannerControl\n} from './style';\n\nexport default memo(function HYTopBanner() {\n  // state\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  // 组件和redux关联: 获取数据和进行操作\n  const { topBanners } = useSelector(state => ({\n    // topBanners: state.get(\"recommend\").get(\"topBanners\")\n    topBanners: state.getIn([\"recommend\", \"topBanners\"])\n  }), shallowEqual);\n  const dispatch = useDispatch();\n\n  // 其他hooks\n  const bannerRef = useRef();\n  useEffect(() => {\n    dispatch(getTopBannerAction());\n  }, [dispatch]);\n\n  const bannerChange = useCallback((from, to) => {\n    setTimeout(() => {\n      setCurrentIndex(to);\n    }, 0);\n  }, []);\n\n  // 其他业务逻辑\n  const bgImage = topBanners[currentIndex] && (topBanners[currentIndex].imageUrl + \"?imageView&blur=40x20\")\n\n  return (\n    <BannerWrapper bgImage={bgImage}>\n      <div className=\"banner wrap-v2\">\n        <BannerLeft>\n          <Carousel effect=\"fade\" autoplay ref={bannerRef} beforeChange={bannerChange}>\n            {\n              topBanners.map((item, index) => {\n                return (\n                  <div className=\"banner-item\" key={item.imageUrl}>\n                    <img className=\"image\" src={item.imageUrl} alt={item.typeTitle} />\n                  </div>\n                )\n              })\n            }\n          </Carousel>\n        </BannerLeft>\n        <BannerRight></BannerRight>\n        <BannerControl>\n          <button className=\"btn left\" onClick={e => bannerRef.current.prev()}></button>\n          <button className=\"btn right\" onClick={e => bannerRef.current.next()}></button>\n        </BannerControl>\n      </div>\n    </BannerWrapper>\n  )\n})\n"]},"metadata":{},"sourceType":"module"}