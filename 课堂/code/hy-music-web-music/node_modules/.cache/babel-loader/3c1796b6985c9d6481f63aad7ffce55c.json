{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u51B7\\u9E1F\\u4E00\\u7C73\\u4E94\\\\Desktop\\\\my-learn\\\\React\\u5B66\\u4E60\\\\\\u8BFE\\u5802\\\\code\\\\hy-music-web-music\\\\src\\\\pages\\\\discover\\\\c-pages\\\\recommend\\\\c-cpns\\\\top-banner\\\\index.js\";\nimport React, { memo, useEffect, useRef, useCallback, useState } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { getTopBannerAction } from '../../store/actionCreators';\nimport { Carousel } from 'antd';\nimport { BannerWrapper, BannerLeft, BannerRight, BannerControl } from './style';\nexport default memo(function HYTopBanner() {\n  // state\n  const [currentIndex, setCurrentIndex] = useState(0); // 组件和redux关联: 获取数据和进行操作\n\n  const {\n    topBanners\n  } = useSelector(state => ({\n    // topBanners: state.get(\"recommend\").get(\"topBanners\")\n    topBanners: state.getIn([\"recommend\", \"topBanners\"])\n  }), shallowEqual);\n  const dispatch = useDispatch(); // 其他hooks\n\n  const bannerRef = useRef();\n  useEffect(() => {\n    dispatch(getTopBannerAction());\n  }, [dispatch]);\n  const bannerChange = useCallback((from, to) => {\n    setTimeout(() => {\n      setCurrentIndex(to);\n    }, 0);\n  }, []); // 其他业务逻辑\n\n  const bgImage = topBanners[currentIndex] && topBanners[currentIndex].imageUrl + \"?imageView&blur=40x20\";\n  return /*#__PURE__*/React.createElement(BannerWrapper, {\n    bgImage: bgImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner wrap-v2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BannerLeft, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Carousel, {\n    effect: \"fade\",\n    autoplay: true,\n    ref: bannerRef,\n    beforeChange: bannerChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, topBanners.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"banner-item\",\n      key: item.imageUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"image\",\n      src: item.imageUrl,\n      alt: item.typeTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 21\n      }\n    }));\n  }))), /*#__PURE__*/React.createElement(BannerRight, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BannerControl, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn left\",\n    onClick: e => bannerRef.current.prev(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn right\",\n    onClick: e => bannerRef.current.next(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }))));\n});","map":{"version":3,"sources":["C:/Users/冷鸟一米五/Desktop/my-learn/React学习/课堂/code/hy-music-web-music/src/pages/discover/c-pages/recommend/c-cpns/top-banner/index.js"],"names":["React","memo","useEffect","useRef","useCallback","useState","useSelector","useDispatch","shallowEqual","getTopBannerAction","Carousel","BannerWrapper","BannerLeft","BannerRight","BannerControl","HYTopBanner","currentIndex","setCurrentIndex","topBanners","state","getIn","dispatch","bannerRef","bannerChange","from","to","setTimeout","bgImage","imageUrl","map","item","index","typeTitle","e","current","prev","next"],"mappings":"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","sourcesContent":["import React, { memo, useEffect, useRef, useCallback, useState } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\n\nimport { getTopBannerAction } from '../../store/actionCreators';\n\nimport { Carousel } from 'antd';\nimport {\n  BannerWrapper,\n  BannerLeft,\n  BannerRight,\n  BannerControl\n} from './style';\n\nexport default memo(function HYTopBanner() {\n  // state\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  // 组件和redux关联: 获取数据和进行操作\n  const { topBanners } = useSelector(state => ({\n    // topBanners: state.get(\"recommend\").get(\"topBanners\")\n    topBanners: state.getIn([\"recommend\", \"topBanners\"])\n  }), shallowEqual);\n  const dispatch = useDispatch();\n\n  // 其他hooks\n  const bannerRef = useRef();\n  useEffect(() => {\n    dispatch(getTopBannerAction());\n  }, [dispatch]);\n\n  const bannerChange = useCallback((from, to) => {\n    setTimeout(() => {\n      setCurrentIndex(to);\n    }, 0);\n  }, []);\n\n  // 其他业务逻辑\n  const bgImage = topBanners[currentIndex] && (topBanners[currentIndex].imageUrl + \"?imageView&blur=40x20\")\n\n  return (\n    <BannerWrapper bgImage={bgImage}>\n      <div className=\"banner wrap-v2\">\n        <BannerLeft>\n          <Carousel effect=\"fade\" autoplay ref={bannerRef} beforeChange={bannerChange}>\n            {\n              topBanners.map((item, index) => {\n                return (\n                  <div className=\"banner-item\" key={item.imageUrl}>\n                    <img className=\"image\" src={item.imageUrl} alt={item.typeTitle} />\n                  </div>\n                )\n              })\n            }\n          </Carousel>\n        </BannerLeft>\n        <BannerRight></BannerRight>\n        <BannerControl>\n          <button className=\"btn left\" onClick={e => bannerRef.current.prev()}></button>\n          <button className=\"btn right\" onClick={e => bannerRef.current.next()}></button>\n        </BannerControl>\n      </div>\n    </BannerWrapper>\n  )\n})\n"]},"metadata":{},"sourceType":"module"}